<ng-container *ngIf='{
  genders: genders$ | async,
  maritalStatuses: maritalStatuses$ | async,
  ethnicGroups: ethnicGroups$ | async } as state'>

  <form (ngSubmit)='Submit($event)' [formGroup]='form' class='flex flex-col space-y-5'>
    <div class='py-5 border-b flex items-center justify-between'>
      <div class='flex flex-col'>
        <span class='text-gray-800 font-medium'>Setup your profile</span>
        <span class='text-xs text-gray-400'>Add your profile details</span>
      </div>
    </div>

    <div class='flex flex-col'>
      <div class='w-full md:w-1/3'>
        <h1 class='text-gray-900'>Gender</h1>
      </div>
      <div class='w-full md:w-2/4 flex flex-col'>
        <nz-select class='w-full bg-gray-100 rounded-lg' formControlName='gender' nzPlaceHolder='Select gender'
                   nzSize='large'>
          <nz-option *ngFor='let item of state.genders || []' [nzLabel]='item.name' [nzValue]='item.id'></nz-option>
        </nz-select>
        <span *ngIf="hasError('gender', 'required')" class='form-error'>Value is required</span>
      </div>
    </div>

    <div class='flex flex-col'>
      <div class='w-full md:w-1/3'>
        <h1 class='text-gray-900'>Looking for</h1>
      </div>
      <div class='w-full md:w-2/4 flex flex-col'>
        <nz-select class='w-full rounded-lg bg-gray-100' formControlName='seekingGender' nzPlaceHolder='Select'
                   nzShowSearch
                   nzSize='large'>
          <nz-option *ngFor='let item of state.genders || []' [nzLabel]='item.name' [nzValue]='item.id'></nz-option>
        </nz-select>
        <span *ngIf="hasError('seekingGender', 'required')" class='form-error'>Value is required</span>
      </div>
    </div>

    <div class='flex flex-col'>
      <div class='w-full md:w-1/3'>
        <h1 class='text-gray-900 '>Date of Birth</h1>
        <p class='text-xs text-gray-400'>No persons under 18 years are permitted</p>
      </div>
      <div class='w-full md:w-2/4 flex flex-col space-y-2'>
        <nz-date-picker [nzDisabledDate]='isAllowedBirth' [nzMode]='' bol@_19590@_LWANG!
                        class='w-full bg-gray-100' formControlName='dateOfBirth'
                        nzSize='large'></nz-date-picker>
        <span *ngIf="hasError('dateOfBirth', 'required')" class='form-error'>Date of Birth is required</span>
        <span *ngIf="hasError('dateOfBirth', 'expectedYears')" class='form-error'>Must be 18 years or older</span>
      </div>
    </div>

    <div class='flex flex-col'>
      <div class='w-full md:w-1/3'>
        <h1 class='text-gray-900'>Bio</h1>
        <p class='text-xs text-gray-400'>Tell a little about yourself</p>
      </div>
      <div class='w-full md:w-2/4'>
        <div class='form-field w-full'>
          <textarea formControlName='bio' placeholder=' ' rows='5'></textarea>
        </div>
        <span *ngIf="hasError('bio', 'required')" class='form-error'>Bio is required</span>
      </div>
    </div>

    <div class='flex items-center space-x-3 py-4'>
      <nz-switch [nzSize]="'default'" class='bg-gray-200 rounded-xl p-0' formControlName='optionalValues'></nz-switch>
      <p>Show optional fields</p>
    </div>

    <ng-container *ngIf="form.get('optionalValues')?.value">
      <div class='border-b py-2 flex flex-col'>
        <h1>Optional</h1>
        <p class='text-xs text-gray-400'>The following information might improve your matches</p>
      </div>

      <div class='flex items-center'>
        <div class='w-1/3'>
          <h1 class='text-gray-900 '>Marital Status</h1>
        </div>
        <div class='w-2/4'>
          <div class='form-field w-full'>
            <nz-select class='w-full rounded-lg' formControlName='maritalStatus' nzPlaceHolder='Select'
                       nzSize='large'>
              <nz-option *ngFor='let item of state.maritalStatuses || []' [nzLabel]='item.name'
                         [nzValue]='item.id'></nz-option>
            </nz-select>
          </div>
        </div>
      </div>

      <div class='flex'>
        <div class='w-1/3'>
          <h1 class='text-gray-900 '>Ethnic group</h1>
        </div>
        <div class='w-2/4'>
          <div class='form-field w-full'>
            <nz-select class='w-full rounded-lg' formControlName='ethnicGroup' nzPlaceHolder='Select' nzShowSearch
                       nzSize='large'>
              <nz-option *ngFor='let item of state.ethnicGroups || []' [nzLabel]='item.name'
                         [nzValue]='item.id'></nz-option>
            </nz-select>
          </div>
        </div>
      </div>

    </ng-container>


    <div>
      <button [disabled]='formSubmitting' class='button-primary w-full md:w-auto'>
        <span *ngIf='!formSubmitting'>Continue</span>
        <span *ngIf='formSubmitting'>Saving...</span>
      </button>
    </div>
  </form>
</ng-container>
