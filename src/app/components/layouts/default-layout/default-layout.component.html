<ng-container *ngIf='{ user: user$ | async, theme: theme$ | async } as data'>
  <div class='flex justify-center w-full h-full bg-gradient-to-t md:py-5 from-red-500 to-pink-400'>
    <div class='w-full lg:w-3/4 flex bg-white rounded-md flex-col-reverse lg:flex-col'>
      <header
        class='w-full flex items-center border-t lg:border-b md:px-10 lg:py-5 rounded-t-md flex-none bg-white dark:text-gray-300 dark:border-gray-800 dark:bg-gray-800'>
        <div class='flex-none w-56 hidden lg:block'>
          <app-ui-logo class='hover:transition hover:animate-bounce'></app-ui-logo>
        </div>
        <nav class='flex grow justify-evenly lg:justify-start space-x-3 lg:space-x-5'>
          <a [routerLinkActive]="'active'" [routerLink]="'messages'" class='nav-link'>
            <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
              <path
                d='M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25'
                stroke-linecap='round'
                stroke-linejoin='round' />
            </svg>

            <span>Home</span>
          </a>
          <a [nzDropdownMenu]='membersSearchDropDown' [nzPlacement]="'bottomLeft'"
             [routerLinkActive]="'bg-gray-100 dark:bg-gray-700'"
             [routerLink]="'members'"
             class='nav-link'
             nz-dropdown>
            <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
              <path
                d='M15.75 15.75l-2.489-2.489m0 0a3.375 3.375 0 10-4.773-4.773 3.375 3.375 0 004.774 4.774zM21 12a9 9 0 11-18 0 9 9 0 0118 0z'
                stroke-linecap='round'
                stroke-linejoin='round' />
            </svg>

            <span>Search</span>
          </a>
          <a [routerLinkActive]="'bg-gray-100 dark:bg-gray-700'" [routerLink]="'messages'"
             class='nav-link'>
            <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
              <path
                d='M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z'
                stroke-linecap='round'
                stroke-linejoin='round' />
            </svg>
            <span>Messages</span>
            <nz-badge [nzCount]='5'></nz-badge>
          </a>
          <a [routerLinkActive]="'bg-gray-100 dark:bg-gray-700'" [routerLink]="'messages'"
             class='nav-link notification-menu'>
            <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
              <path
                d='M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0'
                stroke-linecap='round'
                stroke-linejoin='round' />
            </svg>
            <span>Notifications</span>
            <nz-badge [nzCount]='5'></nz-badge>
          </a>
          <a [routerLinkActive]="'bg-gray-100 dark:bg-gray-700'" [routerLink]="'menu'"
             class='px-3 flex flex-col items-center lg:flex-row lg:space-x-2 py-3 dark:hover:bg-gray-700 hover:bg-gray-100 rounded-md relative lg:hidden'>
            <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                 viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
              <path d='M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5' stroke-linecap='round' stroke-linejoin='round' />
            </svg>
            <span class='text-gray-700 dark:text-gray-300 text-xxs lg:text-base'>Menu</span>
          </a>
        </nav>
        <div class='flex space-x-2 items-center hidden lg:block'>
          <a [nzDropdownMenu]='profileMenuDropDown' [nzPlacement]="'bottomRight'"
             class='hover:bg-gray-100 dark:hover:bg-gray-700 rounded-3xl'
             nz-dropdown>
            <app-ui-current-user [user]='data.user'></app-ui-current-user>
          </a>
        </div>
      </header>
      <main class='w-full flex-grow flex flex-col lg:items-center pb-4'>
        <div class='flex-grow'>
          <router-outlet></router-outlet>
        </div>
        <div class='flex-none flex justify-center py-2'>
          <p class='text-xxs text-gray-400'>By using this site you agree to our <a class='text-gray-500'>terms</a> and
            <a
              class='text-gray-500'>privacy policy</a></p>
        </div>
      </main>

      <!-- Drop Downs -->
      <nz-dropdown-menu #membersSearchDropDown='nzDropdownMenu'>
        <div class='rounded-md w-132 dark:bg-gray-900 text-gray-200' nz-menu>
          <div class='grid grid-cols-2 gap-2 px-3 py-3'>
            <a class='px-4 py-4 hover:bg-gray-100 rounded-md'>
              <h1 class='text-gray-900 font-medium'>Nearby</h1>
              <p class='text-gray-600'>3333 closest to you</p>
            </a>
            <a class='px-4 py-4 hover:bg-gray-100 rounded-md'>
              <h1 class='text-gray-900 font-medium'>Online</h1>
              <p class='text-gray-600'>3333 members online</p>
            </a>
            <a class='px-4 py-4 hover:bg-gray-100 rounded-md'>
              <h1 class='text-gray-900 font-medium'>Latest</h1>
              <p class='text-gray-600'>3333 latest joiners</p>
            </a>
            <a class='px-4 py-4 hover:bg-gray-100 rounded-md'>
              <h1 class='text-gray-900 font-medium'>Favourites</h1>
              <p class='text-gray-600'>2 added as your favourites</p>
            </a>
          </div>
          <div class='flex items-center justify-between px-3 py-2 border-t'>
            <div class='px-4'>
              <h1 class='text-gray-900 font-medium'>Advanced search</h1>
              <p class='text-gray-600'>Search through all members</p>
            </div>
            <div>
              <a class='bg-blue-500 text-gray-50 px-2 py-2 hover:bg-gray-200 rounded-md'>Search</a>
            </div>
          </div>
        </div>
      </nz-dropdown-menu>
      <nz-dropdown-menu #themeDropDown='nzDropdownMenu'>
        <div class='rounded-md dark:bg-gray-900 text-gray-200 w-52' nz-menu>
          <div (onChanged)='changeTheme()' [theme]='data?.theme' app-ui-theme-switcher></div>
        </div>
      </nz-dropdown-menu>
      <nz-dropdown-menu #profileMenuDropDown='nzDropdownMenu'>
        <div class='rounded-2xl w-72 dark:bg-gray-900 text-gray-200 px-2 py-2' nz-menu>
          <div class='px-4 py-6 border-b'>
            <div class='flex items-center space-x-3'>
              <app-ui-current-user [size]="'large'" [user]='data.user'></app-ui-current-user>
              <div class=''>
                <h1 class='font-semibold'>Profile</h1>
                <p class='text-gray-800'>{{data.user?.displayName}}</p>
              </div>
            </div>
          </div>
          <div class='dark:border-gray-700 px-2 flex flex-col space-y-2 py-2 pb-4'>
            <a [routerLink]="'profile'"
               class='rounded-lg flex items-center space-x-2 dark:text-gray-400 dark:hover:bg-gray-800' nz-menu-item>
              <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                   viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path
                  d='M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z'
                  stroke-linecap='round'
                  stroke-linejoin='round' />
              </svg>
              <span>My Profile</span>
            </a>
            <a [routerLink]="'profile/photos'"
               class='rounded-lg flex items-center space-x-2 dark:text-gray-400 dark:hover:bg-gray-800'
               nz-menu-item>
              <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                   viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path
                  d='M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z'
                  stroke-linecap='round'
                  stroke-linejoin='round' />
              </svg>
              <span>My Photos</span>
            </a>
            <a [routerLink]="'account/subscription'"
               class='rounded-lg dark:text-gray-400 flex items-center space-x-2 dark:hover:bg-gray-800 relative'
               nz-menu-item>
              <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                   viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path
                  d='M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-5.25h5.25M7.5 15h3M3.375 5.25c-.621 0-1.125.504-1.125 1.125v3.026a2.999 2.999 0 010 5.198v3.026c0 .621.504 1.125 1.125 1.125h17.25c.621 0 1.125-.504 1.125-1.125v-3.026a2.999 2.999 0 010-5.198V6.375c0-.621-.504-1.125-1.125-1.125H3.375z'
                  stroke-linecap='round'
                  stroke-linejoin='round' />
              </svg>
              <span>Subscription</span>
              <span
                class='absolute bg-green-50 right-2 px-2 text-green-600 dark:bg-gray-600 dark:text-green-500 rounded'>Free</span>
            </a>
            <a [routerLink]="'account'"
               class='rounded-lg flex items-center space-x-2 dark:text-gray-400 dark:hover:bg-gray-800' nz-menu-item>
              <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                   viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path
                  d='M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z'
                  stroke-linecap='round'
                  stroke-linejoin='round' />
                <path d='M15 12a3 3 0 11-6 0 3 3 0 016 0z' stroke-linecap='round' stroke-linejoin='round' />
              </svg>
              <span>Settings</span>
            </a>
            <hr>
            <div (onChanged)='changeTheme()' [theme]='data?.theme' app-ui-theme-switcher></div>

            <a (click)='onLogout()'
               class='rounded-md flex items-center space-x-2 dark:text-gray-400 dark:hover:bg-gray-800' nz-menu-item>
              <svg class='w-6 h-6' fill='none' stroke='currentColor' stroke-width='1.5'
                   viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'>
                <path d='M12.75 15l3-3m0 0l-3-3m3 3h-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z' stroke-linecap='round'
                      stroke-linejoin='round' />
              </svg>
              <span>Sign Out</span>
            </a>
          </div>
        </div>
      </nz-dropdown-menu>
    </div>
  </div>
</ng-container>

